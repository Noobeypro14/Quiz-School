<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="nooblogo.png">
  <title>Noobie's Pre-Exam | CBT</title>
  <style>
    :root {
      --bg: #000000;
      --card: #1A1A1A;
      --accent: #FFD700;
      --muted: #888888;
      --good: #00c853;
      --ok: #ffd54f;
      --bad: #ff5252;
      --text-light: #F0F0F0;
      --glass: rgba(255,255,255,0.03);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: Inter, "Segoe UI", Roboto, Arial, sans-serif;
      background: linear-gradient(135deg, #151515, #000000);
      color: var(--text-light);
      padding: 24px;
      min-height: 100vh;
    }

    header { text-align: center; margin-bottom: 20px; }
    h1 {
      margin: 0;
      font-size: 28px;
      color: var(--accent);
      text-shadow: 0 2px 8px rgba(255, 215, 0, 0.25);
    }
    .meta { color: var(--muted); margin-top: 8px; font-size: 14px; }

    main { max-width: 980px; margin: 18px auto; }

    .quiz-card {
      background: var(--card);
      border-radius: 12px;
      padding: 18px;
      margin: 14px 0;
      box-shadow: 0 8px 20px rgba(0,0,0,0.5);
      border: 1px solid rgba(255, 215, 0, 0.06);
    }

    .qrow { display: flex; gap: 14px; align-items: flex-start; margin-bottom: 10px; }
    .qnum {
      min-width: 44px; height: 44px; line-height: 44px;
      text-align: center; border-radius: 10px;
      background: var(--accent); color: #000; font-weight: 700;
      box-shadow: 0 4px 12px rgba(255, 215, 0, 0.2);
      flex-shrink: 0;
    }
    .qtext { flex: 1; font-size: 15px; font-weight: 500; line-height: 1.5; }

    .options { margin-top: 12px; padding-left: 8px; }
    label.opt {
      display: block;
      padding: 10px 14px;
      margin: 8px 0;
      border-radius: 8px;
      cursor: pointer;
      background: #1f1f1f;
      border: 1px solid rgba(255,215,0,0.08);
      transition: transform .12s ease, box-shadow .12s ease;
      user-select: none;
    }
    label.opt:hover { transform: translateY(-4px); box-shadow: 0 8px 22px rgba(0,0,0,0.6); border-color: var(--accent); }

    input[type="radio"] { margin-right: 12px; accent-color: var(--accent); }

    .controls { text-align: center; margin: 26px 0; }

    button.primary {
      background: var(--accent); color: #000; border: 0;
      padding: 12px 26px; font-size: 15px; border-radius: 10px;
      cursor: pointer; box-shadow: 0 10px 30px rgba(255,215,0,0.22);
      font-weight: 700;
    }
    button.primary:hover { transform: translateY(-3px); background: #ffea5a; }

    button.secondary {
      margin-left: 12px; padding: 10px 18px; border-radius: 10px;
      cursor: pointer; background: transparent; color: var(--muted);
      border: 1px solid rgba(255,255,255,0.06);
    }
    button.secondary:hover { color: var(--accent); border-color: var(--accent); }

    /* ====== RESULT STYLES (ONLY THIS AREA changed) ====== */
    #result {
      display: none;                 /* starts hidden; will be inline under controls */
      max-width: 900px;
      margin: 18px auto;
      padding: 20px;
      border-radius: 12px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border: 1px solid rgba(255,255,255,0.04);
      box-shadow: 0 12px 36px rgba(0,0,0,0.6);
      color: var(--text-light);
      transition: transform .28s cubic-bezier(.2,.9,.3,1), opacity .28s ease;
      backdrop-filter: blur(6px);
    }

    #result.show {
      display: block;
      transform: translateY(0);
      opacity: 1;
    }

    /* header row of result */
    #result .result-top {
      display: flex;
      gap: 16px;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    #result .score-badge {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    #result .score {
      font-size: 28px;
      font-weight: 800;
      color: var(--accent);
      letter-spacing: -0.6px;
    }

    #result .percent {
      font-size: 22px;
      font-weight: 700;
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(255,215,0,0.08);
      color: var(--accent);
    }

    /* progress bar */
    .result-progress {
      width: 100%;
      height: 12px;
      border-radius: 999px;
      background: rgba(255,255,255,0.03);
      margin-top: 12px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.02);
    }
    .result-progress .bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, rgba(255,215,0,0.95), rgba(255,215,0,0.6));
      transition: width 900ms cubic-bezier(.2,.9,.3,1);
      box-shadow: 0 6px 20px rgba(255,215,0,0.08);
    }

    .result-msg {
      margin-top: 12px;
      font-size: 15px;
      color: var(--muted);
    }

    .result-actions {
      margin-top: 14px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .wrong-list {
      margin-top: 14px;
      background: rgba(255,255,255,0.02);
      border-radius: 8px;
      padding: 12px;
      font-size: 14px;
      color: var(--text-light);
      border: 1px solid rgba(255,255,255,0.02);
    }
    .wrong-item {
      padding: 8px 6px;
      border-bottom: 1px dashed rgba(255,255,255,0.03);
    }
    .wrong-item:last-child { border-bottom: none; }

    /* colored captions depending on performance */
    #result.good .percent { background: rgba(0,200,83,0.08); color: var(--good); }
    #result.ok .percent { background: rgba(255,213,79,0.06); color: var(--ok); }
    #result.try .percent { background: rgba(255,82,82,0.06); color: var(--bad); }

    @media (max-width: 640px) {
      .qrow { flex-direction: column; }
      .qnum { width: 48px; height: 48px; line-height: 48px; }
      button.primary, button.secondary { width: 100%; margin: 6px 0; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Noobie's Pre-Exam | CBT Test</h1>
    <div class="meta">
  Calculus Objective Test â€” 70 Questions covering Differentiation & Integration (basic to advanced) â€¢ <strong>1 mark</strong> per correct answer
</div>
    <div class="meta">Total questions: <span id="totalQs">70</span></div>
  </header>

  <main id="quizContainer"></main>

  <div class="controls">
    <button class="primary" id="submitBtn" onclick="submitQuiz()">Submit Test</button>
    <button class="secondary" id="resetBtn" onclick="resetQuiz()">Reset Answers</button>
  </div>

  <!-- RESULT (inline below controls) -->
  <div id="result" aria-live="polite"></div>

  <div class="note" style="text-align:center; color:var(--muted); margin-top:12px;">
    This quiz covers MTH102
  </div>

  <footer style="text-align:center; color:var(--muted); font-size:13px; margin-top:28px;">
    <p>Mathematics | Calculus | Original Idea by Jafaar</p>
    <p style="margin-top:20px; font-size:14px; color:gray; text-align:center;">
  ðŸ”„ This quiz will be updated daily with Computer Science courses and general courses (Maths, Physics, GST) useful for everyone.
    </p>
    <p> Made By Emmanuel | Computer Science | 100lvl | CodeX </p>
  </footer>

  <script>
    // Your exact 70-question array (word-for-word as provided)
   const questions = [
  // Definition and Fundamentals (10 questions)
  { q: "What is the primary goal of science communication?", options: ["To make scientific knowledge accessible to non-experts", "To publish research in academic journals", "To secure research funding", "To train future scientists"], answer: "To make scientific knowledge accessible to non-experts" },
  { q: "Which term describes the process of translating complex scientific concepts for public understanding?", options: ["Knowledge translation", "Scientific simplification", "Expert mediation", "Technical dissemination"], answer: "Knowledge translation" },
  { q: "What distinguishes science communication from scientific writing?", options: ["Focus on audience adaptation", "Use of technical terminology", "Emphasis on data analysis", "Requirement of peer review"], answer: "Focus on audience adaptation" },
  { q: "Which element is MOST crucial in effective science communication?", options: ["Audience awareness", "Statistical rigor", "Length of presentation", "Number of citations"], answer: "Audience awareness" },
  { q: "What does the 'deficit model' in science communication assume?", options: ["Public lacks knowledge that experts should provide", "Public has equal understanding as experts", "Science should remain within academic circles", "Communication should be bidirectional"], answer: "Public lacks knowledge that experts should provide" },
  { q: "Which approach challenges the traditional deficit model?", options: ["Dialogue model", "Lecture model", "Publication model", "Technical model"], answer: "Dialogue model" },
  { q: "What is a key ethical consideration in science communication?", options: ["Avoiding exaggeration of findings", "Using complex terminology", "Focusing only on positive results", "Limiting audience engagement"], answer: "Avoiding exaggeration of findings" },
  { q: "Which skill is MOST important for a science communicator?", options: ["Ability to simplify complex ideas", "Expertise in multiple scientific fields", "Advanced statistical knowledge", "Laboratory technical skills"], answer: "Ability to simplify complex ideas" },
  { q: "What does 'public understanding of science' primarily aim to achieve?", options: ["Scientific literacy among non-experts", "More scientific publications", "Increased research funding", "Technical specialization"], answer: "Scientific literacy among non-experts" },
  { q: "Which historical event significantly increased public demand for science communication?", options: ["COVID-19 pandemic", "Discovery of DNA structure", "Moon landing", "Industrial Revolution"], answer: "COVID-19 pandemic" },

  // Technology Education vs Educational Technology (10 questions)
  { q: "What is the primary focus of Technology Education?", options: ["Teaching about technology and its impacts", "Using technology to deliver education", "Developing new educational software", "Training technical specialists"], answer: "Teaching about technology and its impacts" },
  { q: "Educational Technology primarily concerns:", options: ["Using tools to enhance learning", "Studying technology's social effects", "Engineering new devices", "Technical skill development"], answer: "Using tools to enhance learning" },
  { q: "Which describes Technology Education?", options: ["Learning ABOUT technology", "Learning WITH technology", "Creating technology", "Selling technology"], answer: "Learning ABOUT technology" },
  { q: "A course on 'The Impact of AI on Society' represents:", options: ["Technology Education", "Educational Technology", "Computer Science", "Engineering"], answer: "Technology Education" },
  { q: "Using virtual reality for classroom instruction exemplifies:", options: ["Educational Technology", "Technology Education", "Digital literacy", "Technical training"], answer: "Educational Technology" },
  { q: "What distinguishes Educational Technology from general technology use?", options: ["Purposeful integration for learning objectives", "Use of expensive equipment", "Focus on entertainment", "Technical complexity"], answer: "Purposeful integration for learning objectives" },
  { q: "Which is a goal of Technology Education?", options: ["Critical thinking about technological impacts", "Programming proficiency", "Device operation skills", "Software development"], answer: "Critical thinking about technological impacts" },
  { q: "Learning management systems like Moodle are examples of:", options: ["Educational Technology", "Technology Education", "Digital platforms", "Social media"], answer: "Educational Technology" },
  { q: "Studying the ethical implications of genetic engineering falls under:", options: ["Technology Education", "Educational Technology", "Biology education", "Philosophy"], answer: "Technology Education" },
  { q: "What is a common challenge in implementing Educational Technology?", options: ["Teacher training and support", "Student interest in technology", "Availability of devices", "Internet connectivity"], answer: "Teacher training and support" },

  // Constructivism and Types (15 questions)
  { q: "What is the core principle of constructivism?", options: ["Learners actively construct knowledge", "Knowledge is transmitted directly", "Learning is passive reception", "Information is absorbed automatically"], answer: "Learners actively construct knowledge" },
  { q: "Which constructivist type emphasizes social interaction?", options: ["Social Constructivism", "Cognitive Constructivism", "Radical Constructivism", "Behavioral Constructivism"], answer: "Social Constructivism" },
  { q: "Who is most associated with Social Constructivism?", options: ["Vygotsky", "Piaget", "Von Glasersfeld", "Skinner"], answer: "Vygotsky" },
  { q: "Cognitive Constructivism focuses primarily on:", options: ["Individual mental processes", "Group learning dynamics", "Cultural influences", "Political contexts"], answer: "Individual mental processes" },
  { q: "What does Radical Constructivism emphasize?", options: ["Personal knowledge construction", "Social validation of knowledge", "Cultural transmission", "Behavioral conditioning"], answer: "Personal knowledge construction" },
  { q: "The 'Zone of Proximal Development' is key to:", options: ["Social Constructivism", "Cognitive Constructivism", "Radical Constructivism", "Behaviorism"], answer: "Social Constructivism" },
  { q: "Which constructivist approach questions objective reality?", options: ["Radical Constructivism", "Social Constructivism", "Cognitive Constructivism", "Critical Constructivism"], answer: "Radical Constructivism" },
  { q: "In science communication, constructivism suggests:", options: ["Audiences interpret based on prior knowledge", "Information transfers directly to audiences", "Communication should be one-directional", "Prior knowledge is irrelevant"], answer: "Audiences interpret based on prior knowledge" },
  { q: "Scaffolding in learning relates to which constructivist type?", options: ["Social Constructivism", "Radical Constructivism", "Cognitive Constructivism", "Individual Constructivism"], answer: "Social Constructivism" },
  { q: "Which statement aligns with Cognitive Constructivism?", options: ["Learning builds on existing mental models", "Knowledge is socially negotiated", "Reality is individually constructed", "Behavior determines learning"], answer: "Learning builds on existing mental models" },
  { q: "What is a key implication of constructivism for science communicators?", options: ["Connect new information to existing knowledge", "Present information exactly as in journals", "Use maximum technical detail", "Avoid audience interaction"], answer: "Connect new information to existing knowledge" },
  { q: "Which activity exemplifies Social Constructivism?", options: ["Group discussion and collaboration", "Individual reading", "Lecture without interaction", "Multiple-choice testing"], answer: "Group discussion and collaboration" },
  { q: "Radical Constructivism is most concerned with:", options: ["Individual's experiential world", "Social consensus", "Cultural norms", "Objective truth"], answer: "Individual's experiential world" },
  { q: "The concept of 'schemas' is central to:", options: ["Cognitive Constructivism", "Social Constructivism", "Radical Constructivism", "Behavioral Constructivism"], answer: "Cognitive Constructivism" },
  { q: "Which teaching method LEAST aligns with constructivist principles?", options: ["Traditional lecture without interaction", "Problem-based learning", "Collaborative projects", "Inquiry-based activities"], answer: "Traditional lecture without interaction" },

  // Understanding Audience (10 questions)
  { q: "What is the FIRST step in audience analysis?", options: ["Identify audience characteristics", "Prepare technical content", "Create visual aids", "Schedule presentation time"], answer: "Identify audience characteristics" },
  { q: "Which factor is LEAST important in audience analysis?", options: ["Presenter's favorite color", "Audience's prior knowledge", "Cultural background", "Age range"], answer: "Presenter's favorite color" },
  { q: "What does 'audience segmentation' involve?", options: ["Grouping audiences by characteristics", "Reducing audience size", "Simplifying message content", "Shortening presentation"], answer: "Grouping audiences by characteristics" },
  { q: "Which audience type requires the most technical detail?", options: ["Expert peers", "General public", "School children", "Policy makers"], answer: "Expert peers" },
  { q: "When communicating with policymakers, emphasis should be on:", options: ["Practical implications and recommendations", "Theoretical foundations", "Technical methodologies", "Historical context"], answer: "Practical implications and recommendations" },
  { q: "What is a key consideration for communicating with children?", options: ["Use concrete examples and analogies", "Include complex statistics", "Use technical terminology", "Focus on abstract concepts"], answer: "Use concrete examples and analogies" },
  { q: "Which strategy is MOST effective for diverse audiences?", options: ["Use multiple communication approaches", "Standardize one technical approach", "Focus on lowest common denominator", "Ignore audience differences"], answer: "Use multiple communication approaches" },
  { q: "What does 'cultural competence' in science communication require?", options: ["Understanding audience's cultural background", "Using scientific jargon", "Ignoring cultural differences", "Promoting one cultural perspective"], answer: "Understanding audience's cultural background" },
  { q: "Which tool is MOST useful for audience analysis?", options: ["Surveys and interviews", "Technical manuals", "Scientific journals", "Statistical software"], answer: "Surveys and interviews" },
  { q: "What is a common mistake in audience assessment?", options: ["Assuming homogeneous understanding", "Considering educational background", "Accounting for age differences", "Recognizing cultural diversity"], answer: "Assuming homogeneous understanding" },

  // Principles for Communicating Norms (10 questions)
  { q: "What is the primary purpose of establishing communication norms?", options: ["Ensure clarity and mutual understanding", "Limit audience participation", "Increase technical complexity", "Shorten communication time"], answer: "Ensure clarity and mutual understanding" },
  { q: "Which principle promotes effective science communication?", options: ["Transparency about limitations", "Exaggeration of results", "Use of exclusive jargon", "Avoiding audience questions"], answer: "Transparency about limitations" },
  { q: "What does 'respect for audience intelligence' entail?", options: ["Avoiding condescension while simplifying", "Using maximum technical complexity", "Assuming complete ignorance", "Eliminating all technical terms"], answer: "Avoiding condescension while simplifying" },
  { q: "Which communication norm addresses ethical responsibility?", options: ["Accuracy in representing findings", "Entertainment value", "Presentation length", "Visual appeal"], answer: "Accuracy in representing findings" },
  { q: "What is the 'trustworthiness' principle in science communication?", options: ["Building credibility through honesty", "Maximizing technical details", "Using persuasive techniques", "Avoiding controversy"], answer: "Building credibility through honesty" },
  { q: "Which practice violates good communication norms?", options: ["Overstating certainty of results", "Acknowledging uncertainty", "Citing sources properly", "Using appropriate analogies"], answer: "Overstating certainty of results" },
  { q: "What does the 'accessibility' principle emphasize?", options: ["Making content understandable to target audience", "Using specialized terminology", "Restricting information access", "Focusing on expert audiences only"], answer: "Making content understandable to target audience" },
  { q: "Which norm promotes inclusive science communication?", options: ["Considering diverse perspectives", "Using technical language exclusively", "Focusing on Western science only", "Ignoring cultural contexts"], answer: "Considering diverse perspectives" },
  { q: "What is the purpose of 'feedback mechanisms' in communication norms?", options: ["Enable continuous improvement", "Limit audience interaction", "Reduce preparation time", "Standardize messages"], answer: "Enable continuous improvement" },
  { q: "Which principle addresses power dynamics in science communication?", options: ["Recognizing expert-audience equity", "Maintaining expert authority", "Limiting audience participation", "Emphasizing technical superiority"], answer: "Recognizing expert-audience equity" },

  // Identifying Audience Types (10 questions)
  { q: "Which audience type has deep specialized knowledge?", options: ["Expert peers", "General public", "Students", "Policymakers"], answer: "Expert peers" },
  { q: "What characterizes 'interested public' as an audience?", options: ["Some background knowledge and curiosity", "Technical expertise", "Complete unfamiliarity", "Decision-making authority"], answer: "Some background knowledge and curiosity" },
  { q: "Which audience type needs practical applications emphasized?", options: ["Policymakers and practitioners", "Research scientists", "Young children", "Technical specialists"], answer: "Policymakers and practitioners" },
  { q: "What is key when communicating with 'skeptical audiences'?", options: ["Address concerns with evidence", "Avoid controversial topics", "Use emotional appeals only", "Ignore opposing views"], answer: "Address concerns with evidence" },
  { q: "Which describes a 'lay audience'?", options: ["Minimal technical background", "Expert knowledge", "Decision-making power", "Scientific training"], answer: "Minimal technical background" },
  { q: "What is important when addressing 'international audiences'?", options: ["Cultural sensitivity and context", "Technical complexity", "Local references only", "Specialized jargon"], answer: "Cultural sensitivity and context" },
  { q: "Which audience type requires the most context and background?", options: ["Complete novices", "Expert peers", "Technical staff", "Professional colleagues"], answer: "Complete novices" },
  { q: "What characterizes 'hostile audiences'?", options: ["Pre-existing opposition to topic", "Neutral curiosity", "Expert knowledge", "Decision-making authority"], answer: "Pre-existing opposition to topic" },
  { q: "Which strategy works BEST with 'time-pressed audiences'?", options: ["Key points first, details available later", "Comprehensive technical explanation", "Theoretical foundations", "Historical background"], answer: "Key points first, details available later" },
  { q: "What is crucial for 'multi-generational audiences'?", options: ["Address varying knowledge levels", "Focus on youngest members", "Use technical language", "Ignore age differences"], answer: "Address varying knowledge levels" },

  // Science Writing - Proposals and Literature Reviews (15 questions)
  { q: "What is the primary purpose of a research proposal?", options: ["Secure support and approval for research", "Publish findings", "Entertain readers", "Summarize completed work"], answer: "Secure support and approval for research" },
  { q: "Which section is MOST critical in a research proposal?", options: ["Methodology", "Author biography", "Acknowledgements", "Personal opinions"], answer: "Methodology" },
  { q: "What does a literature review primarily accomplish?", options: ["Synthesizes existing knowledge", "Presents new research findings", "Describes personal experiences", "Provides entertainment"], answer: "Synthesizes existing knowledge" },
  { q: "Which element is ESSENTIAL in a good literature review?", options: ["Critical analysis of sources", "Lengthy quotations", "Personal anecdotes", "Unsupported opinions"], answer: "Critical analysis of sources" },
  { q: "What is the purpose of 'gap analysis' in literature reviews?", options: ["Identify research opportunities", "Criticize previous researchers", "List all publications", "Show personal expertise"], answer: "Identify research opportunities" },
  { q: "Which characteristic defines effective proposal writing?", options: ["Clarity and persuasiveness", "Technical complexity", "Lengthy descriptions", "Vague objectives"], answer: "Clarity and persuasiveness" },
  { q: "What should a research question in a proposal be?", options: ["Specific and answerable", "Broad and philosophical", "Vague and open-ended", "Rhetorical"], answer: "Specific and answerable" },
  { q: "Which is a common mistake in literature reviews?", options: ["Descriptive listing without synthesis", "Critical analysis", "Identifying gaps", "Thematic organization"], answer: "Descriptive listing without synthesis" },
  { q: "What is the role of 'significance' section in proposals?", options: ["Explain research importance", "List references", "Describe methods", "Thank contributors"], answer: "Explain research importance" },
  { q: "Which citation approach is preferred in scientific writing?", options: ["Consistent and accurate", "Inconsistent formatting", "Minimal citations", "Only self-citations"], answer: "Consistent and accurate" },
  { q: "What does 'theoretical framework' provide in a proposal?", options: ["Conceptual foundation for research", "Personal opinions", "Entertaining stories", "Financial details"], answer: "Conceptual foundation for research" },
  { q: "Which is key to effective proposal budgeting?", options: ["Realistic and justified costs", "Underestimating expenses", "Ignoring indirect costs", "Rounding numbers arbitrarily"], answer: "Realistic and justified costs" },
  { q: "What distinguishes a systematic literature review?", options: ["Structured, comprehensive search strategy", "Personal selection of favorites", "Random article inclusion", "Opinion-based selection"], answer: "Structured, comprehensive search strategy" },
  { q: "Which element demonstrates feasibility in proposals?", options: ["Realistic timeline and resources", "Ambitious unsupported claims", "Vague methodology", "Theoretical discussions only"], answer: "Realistic timeline and resources" },
  { q: "What is the purpose of 'limitations' section in proposals?", options: ["Acknowledge and address potential weaknesses", "Hide research flaws", "Exaggerate capabilities", "Ignore constraints"], answer: "Acknowledge and address potential weaknesses" }
];
    // Build UI
  const container = document.getElementById('quizContainer');
  document.getElementById('totalQs').textContent = questions.length;

  // render questions
  questions.forEach((item, idx) => {
    const card = document.createElement('article');
    card.className = 'quiz-card';

    const qrow = document.createElement('div');
    qrow.className = 'qrow';

    const qnum = document.createElement('div');
    qnum.className = 'qnum';
    qnum.textContent = idx + 1;

    const qtext = document.createElement('div');
    qtext.className = 'qtext';
    qtext.innerHTML = `<strong>Q${idx + 1}:</strong> ${item.q}`;

    qrow.appendChild(qnum);
    qrow.appendChild(qtext);
    card.appendChild(qrow);

    const opts = document.createElement('div');
    opts.className = 'options';
    item.options.forEach((opt, optIdx) => {
      const id = `q${idx}_opt${optIdx}`;
      const label = document.createElement('label');
      label.className = 'opt';
      label.innerHTML = `<input type="radio" name="q${idx}" id="${id}" value="${escapeHtml(opt)}"> ${escapeHtml(opt)}`;
      opts.appendChild(label);
    });

    card.appendChild(opts);
    container.appendChild(card);
  });

  // scoring and result rendering
  function submitQuiz() {
    const total = questions.length;
    let score = 0;
    let answered = 0;
    let incorrectList = [];

    questions.forEach((q, i) => {
      const sel = document.querySelector(`input[name="q${i}"]:checked`);
      if (sel) answered++;
      if (sel && sel.value === q.answer) {
        score++;
      } else {
        const given = sel ? sel.value : null;
        incorrectList.push({
          qn: i + 1,
          given: given,
          correct: q.answer
        });
      }
    });

    const percent = Number(((score / total) * 100).toFixed(2));
    const box = document.getElementById('result');

    // reset classes
    box.className = '';

    if (percent >= 80) box.classList.add('good');
    else if (percent >= 50) box.classList.add('ok');
    else box.classList.add('try');

    const performanceText =
      percent >= 80 ? 'Excellent work! You have a strong understanding.' :
      percent >= 50 ? 'Good effort! Review the topics you missed.' :
      'Keep studying! Use this as a learning opportunity.';

    const percentLabel = `${percent}%`;
    const scoreLabel = `${score} / ${total}`;

    let html = `
      <div class="result-top">
        <div class="score-badge">
          <div>
            <div class="score">${scoreLabel}</div>
            <div style="font-size:13px; color:var(--muted);">Answered: ${answered} of ${total}</div>
          </div>
        </div>
        <div style="text-align:right;">
          <div style="font-size:13px; color:var(--muted);">Performance</div>
          <div class="percent">${percentLabel}</div>
        </div>
      </div>

      <div class="result-progress" aria-hidden="true">
        <div class="bar" id="resultBar" style="width:0%"></div>
      </div>

      <div class="result-msg">${escapeHtml(performanceText)}</div>

      <div class="result-actions">
        <button class="primary" onclick="retakeQuiz()">Retake Quiz</button>
        <button class="secondary" onclick="scrollToTop()">Review Answers</button>
      </div>
    `;

    if (incorrectList.length > 0) {
      html += `<div class="wrong-list">
                <div style="font-weight:700; margin-bottom:8px; color:var(--muted);">
                  Incorrect/Unanswered Questions (${incorrectList.length}):
                </div>
                ${incorrectList.map(it => {
                  const givenText = it.given ? `Your answer: "${escapeHtml(it.given)}"` : 'Not answered';
                  return `<div class="wrong-item"><strong>Q${it.qn}</strong> â€” ${givenText} â€¢ Correct: "${escapeHtml(it.correct)}"</div>`;
                }).join('')}
              </div>`;
    }

    box.innerHTML = html;
    box.style.display = 'block';

    requestAnimationFrame(() => {
      const bar = document.getElementById('resultBar');
      if (bar) bar.style.width = percent + '%';
    });

    box.scrollIntoView({ behavior: 'smooth', block: 'start' });

    // disable submit until retake
    const submitBtn = document.getElementById('submit');
    if (submitBtn) submitBtn.disabled = true;
  }

  function resetQuiz() {
    if (!confirm('Reset all selected answers?')) return;
    document.querySelectorAll('input[type="radio"]').forEach(i => i.checked = false);
    const r = document.getElementById('result');
    r.style.display = 'none';
    r.className = '';
    r.innerHTML = '';
  }

  function retakeQuiz() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
    document.querySelectorAll('input[type="radio"]').forEach(i => i.checked = false);

    const r = document.getElementById('result');
    r.className = '';
    r.innerHTML = '';
    r.style.display = 'none';

    // re-enable submit
    const submitBtn = document.getElementById('submit');
    if (submitBtn) submitBtn.disabled = false;
  }

  function scrollToTop() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  // utility to escape HTML
  function escapeHtml(s) {
    if (s === null || s === undefined) return '';
    return String(s)
      .replaceAll('&', '&amp;')
      .replaceAll('<', '&lt;')
      .replaceAll('>', '&gt;')
      .replaceAll('"', '&quot;');
  }
</script>
</body>

</html>
