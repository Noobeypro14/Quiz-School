<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="nooblogo.png">
  <title>Noobie's Pre-Exam | CBT</title>
  <style>
    :root {
      --bg: #000000;
      --card: #1A1A1A;
      --accent: #FFD700;
      --muted: #888888;
      --good: #00c853;
      --ok: #ffd54f;
      --bad: #ff5252;
      --text-light: #F0F0F0;
      --glass: rgba(255,255,255,0.03);
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: Inter, "Segoe UI", Roboto, Arial, sans-serif;
      background: linear-gradient(135deg, #151515, #000000);
      color: var(--text-light);
      padding: 24px;
      min-height: 100vh;
    }

    header { text-align: center; margin-bottom: 20px; }
    h1 {
      margin: 0;
      font-size: 28px;
      color: var(--accent);
      text-shadow: 0 2px 8px rgba(255, 215, 0, 0.25);
    }
    .meta { color: var(--muted); margin-top: 8px; font-size: 14px; }

    main { max-width: 980px; margin: 18px auto; }

    .quiz-card {
      background: var(--card);
      border-radius: 12px;
      padding: 18px;
      margin: 14px 0;
      box-shadow: 0 8px 20px rgba(0,0,0,0.5);
      border: 1px solid rgba(255, 215, 0, 0.06);
    }

    .qrow { display: flex; gap: 14px; align-items: flex-start; margin-bottom: 10px; }
    .qnum {
      min-width: 44px; height: 44px; line-height: 44px;
      text-align: center; border-radius: 10px;
      background: var(--accent); color: #000; font-weight: 700;
      box-shadow: 0 4px 12px rgba(255, 215, 0, 0.2);
      flex-shrink: 0;
    }
    .qtext { flex: 1; font-size: 15px; font-weight: 500; line-height: 1.5; }

    .options { margin-top: 12px; padding-left: 8px; }
    label.opt {
      display: block;
      padding: 10px 14px;
      margin: 8px 0;
      border-radius: 8px;
      cursor: pointer;
      background: #1f1f1f;
      border: 1px solid rgba(255,215,0,0.08);
      transition: transform .12s ease, box-shadow .12s ease;
      user-select: none;
    }
    label.opt:hover { transform: translateY(-4px); box-shadow: 0 8px 22px rgba(0,0,0,0.6); border-color: var(--accent); }

    input[type="radio"] { margin-right: 12px; accent-color: var(--accent); }

    .controls { text-align: center; margin: 26px 0; }

    button.primary {
      background: var(--accent); color: #000; border: 0;
      padding: 12px 26px; font-size: 15px; border-radius: 10px;
      cursor: pointer; box-shadow: 0 10px 30px rgba(255,215,0,0.22);
      font-weight: 700;
    }
    button.primary:hover { transform: translateY(-3px); background: #ffea5a; }

    button.secondary {
      margin-left: 12px; padding: 10px 18px; border-radius: 10px;
      cursor: pointer; background: transparent; color: var(--muted);
      border: 1px solid rgba(255,255,255,0.06);
    }
    button.secondary:hover { color: var(--accent); border-color: var(--accent); }

    /* ====== RESULT STYLES (ONLY THIS AREA changed) ====== */
    #result {
      display: none;                 /* starts hidden; will be inline under controls */
      max-width: 900px;
      margin: 18px auto;
      padding: 20px;
      border-radius: 12px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border: 1px solid rgba(255,255,255,0.04);
      box-shadow: 0 12px 36px rgba(0,0,0,0.6);
      color: var(--text-light);
      transition: transform .28s cubic-bezier(.2,.9,.3,1), opacity .28s ease;
      backdrop-filter: blur(6px);
    }

    #result.show {
      display: block;
      transform: translateY(0);
      opacity: 1;
    }

    /* header row of result */
    #result .result-top {
      display: flex;
      gap: 16px;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    #result .score-badge {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    #result .score {
      font-size: 28px;
      font-weight: 800;
      color: var(--accent);
      letter-spacing: -0.6px;
    }

    #result .percent {
      font-size: 22px;
      font-weight: 700;
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(255,215,0,0.08);
      color: var(--accent);
    }

    /* progress bar */
    .result-progress {
      width: 100%;
      height: 12px;
      border-radius: 999px;
      background: rgba(255,255,255,0.03);
      margin-top: 12px;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.02);
    }
    .result-progress .bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, rgba(255,215,0,0.95), rgba(255,215,0,0.6));
      transition: width 900ms cubic-bezier(.2,.9,.3,1);
      box-shadow: 0 6px 20px rgba(255,215,0,0.08);
    }

    .result-msg {
      margin-top: 12px;
      font-size: 15px;
      color: var(--muted);
    }

    .result-actions {
      margin-top: 14px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .wrong-list {
      margin-top: 14px;
      background: rgba(255,255,255,0.02);
      border-radius: 8px;
      padding: 12px;
      font-size: 14px;
      color: var(--text-light);
      border: 1px solid rgba(255,255,255,0.02);
    }
    .wrong-item {
      padding: 8px 6px;
      border-bottom: 1px dashed rgba(255,255,255,0.03);
    }
    .wrong-item:last-child { border-bottom: none; }

    /* colored captions depending on performance */
    #result.good .percent { background: rgba(0,200,83,0.08); color: var(--good); }
    #result.ok .percent { background: rgba(255,213,79,0.06); color: var(--ok); }
    #result.try .percent { background: rgba(255,82,82,0.06); color: var(--bad); }

    @media (max-width: 640px) {
      .qrow { flex-direction: column; }
      .qnum { width: 48px; height: 48px; line-height: 48px; }
      button.primary, button.secondary { width: 100%; margin: 6px 0; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Noobie's Pre-Exam | CBT Test</h1>
    <div class="meta">Comprehensive Test on Physics covering key concepts and past question topics mainly‚Ä¢ <strong>1 mark</strong> per correct answer</div>
    <div class="meta">Total questions: <span id="totalQs">70</span></div>
  </header>

  <main id="quizContainer"></main>

  <div class="controls">
    <button class="primary" id="submitBtn" onclick="submitQuiz()">Submit Test</button>
    <button class="secondary" id="resetBtn" onclick="resetQuiz()">Reset Answers</button>
  </div>

  <!-- RESULT (inline below controls) -->
  <div id="result" aria-live="polite"></div>

  <div class="note" style="text-align:center; color:var(--muted); margin-top:12px;">
    This quiz covers PHY102 - Electricity and Magnetism
  </div>

  <footer style="text-align:center; color:var(--muted); font-size:13px; margin-top:28px;">
    <p>Physics | Electricity and Magnetism ‚Äî Original Idea by Jafaar</p>
    <p style="margin-top:20px; font-size:14px; color:gray; text-align:center;">
  üîÑ This quiz will be updated daily with Computer Science courses and general courses (Maths, Physics, GST) useful for everyone.
    </p>
    <p> Made By Emmanuel | Computer Science | 100lvl | CodeX </p>
  </footer>

  <script>
    // Your exact 70-question array (word-for-word as provided)
    const questions = [
  // ---- 30 from yesterday‚Äôs topics ----
  { q: "A conductor of length 0.5 m moves at 6 m/s perpendicular to a magnetic field of 0.25 T. Find the induced emf.", options: ["0.75 V", "1.25 V", "0.5 V", "2.0 V"], answer: "0.75 V" },
  { q: "A 200-turn coil of area 0.01 m¬≤ is placed in a magnetic field of 0.5 T. If the field is reduced to zero in 0.1 s, find the induced emf.", options: ["10 V", "5 V", "1 V", "0.5 V"], answer: "10 V" },
  { q: "A straight conductor of length 0.4 m is moved with a velocity of 3 m/s at right angles to a magnetic field of 0.2 T. Induced emf is:", options: ["0.12 V", "0.24 V", "0.36 V", "0.48 V"], answer: "0.24 V" },
  { q: "The SI unit of magnetic flux is:", options: ["Tesla", "Weber", "Henry", "Volt"], answer: "Weber" },
  { q: "If the flux linked with a coil changes from 0.01 Wb to 0 in 0.05 s, the average induced emf in the 200-turn coil is:", options: ["20 V", "40 V", "80 V", "0.4 V"], answer: "40 V" },
  { q: "A rectangular coil of 100 turns, area 0.02 m¬≤, is rotated at 50 Hz in a field of 0.1 T. The maximum induced emf is:", options: ["62.8 V", "31.4 V", "6.28 V", "12.6 V"], answer: "62.8 V" },
  { q: "Faraday‚Äôs law of induction states that emf induced is proportional to:", options: ["Rate of change of flux", "Flux squared", "Magnetic field strength only", "None"], answer: "Rate of change of flux" },
  { q: "Which law explains the direction of induced emf?", options: ["Coulomb‚Äôs law", "Lenz‚Äôs law", "Ohm‚Äôs law", "Ampere‚Äôs law"], answer: "Lenz‚Äôs law" },
  { q: "A 300-turn solenoid of length 0.5 m carries a current of 2 A. Find magnetic field inside (Œº‚ÇÄ = 4œÄ√ó10‚Åª‚Å∑).", options: ["1.5√ó10‚Åª¬≥ T", "3.0√ó10‚Åª¬≥ T", "7.5√ó10‚Åª‚Å¥ T", "9.0√ó10‚Åª¬≥ T"], answer: "1.5√ó10‚Åª¬≥ T" },
  { q: "The induced emf in a coil of N turns is E = ‚ÄìN dŒ¶/dt. This represents:", options: ["Lenz‚Äôs law", "Faraday‚Äôs law", "Coulomb‚Äôs law", "Gauss‚Äôs law"], answer: "Faraday‚Äôs law" },
  { q: "A 500-turn coil links a flux of 2√ó10‚Åª¬≥ Wb. Find the flux linkage.", options: ["0.5 Wb", "1 Wb", "1.5 Wb", "None"], answer: "1 Wb" },
  { q: "If a 50 cm conductor is moved at 4 m/s across a magnetic field of 0.6 T, emf induced is:", options: ["1.2 V", "2.4 V", "3.0 V", "4.8 V"], answer: "1.2 V" },
  { q: "Which of these is NOT a factor affecting induced emf?", options: ["Speed of motion", "Magnetic field strength", "Resistance of circuit", "Flux change"], answer: "Resistance of circuit" },
  { q: "The dimension of magnetic flux is:", options: ["ML¬≤T‚Åª¬≤A‚Åª¬π", "MLT‚Åª¬≤A‚Åª¬π", "ML¬≤T‚Åª¬≤", "MLT‚Åª¬≥A‚Åª¬π"], answer: "ML¬≤T‚Åª¬≤A‚Åª¬π" },
  { q: "If flux through 1 turn is 5√ó10‚Åª‚Å¥ Wb, then flux linkage for 200 turns is:", options: ["0.01 Wb", "0.1 Wb", "0.05 Wb", "1 Wb"], answer: "0.1 Wb" },
  { q: "When a coil rotates in a uniform magnetic field, induced emf is maximum when plane of coil is:", options: ["Parallel to field", "Perpendicular to field", "At 45¬∞", "None"], answer: "Parallel to field" },
  { q: "Lenz‚Äôs law is a consequence of:", options: ["Law of inertia", "Conservation of charge", "Conservation of energy", "Newton‚Äôs third law"], answer: "Conservation of energy" },
  { q: "If number of turns of a coil is doubled, emf induced for same flux change is:", options: ["Halved", "Doubled", "Unchanged", "Zero"], answer: "Doubled" },
  { q: "The emf induced in a moving conductor is called:", options: ["Transformer emf", "Motional emf", "Electrostatic emf", "None"], answer: "Motional emf" },
  { q: "A coil with 1000 turns links a flux of 2√ó10‚Åª¬≥ Wb in 0.5 s. Average induced emf is:", options: ["2 V", "4 V", "6 V", "8 V"], answer: "4 V" },
  { q: "Magnetic flux through a surface is defined as:", options: ["B√óA", "B√óA cosŒ∏", "E√óq", "None"], answer: "B√óA cosŒ∏" },
  { q: "SI unit of self-inductance is:", options: ["Henry", "Weber", "Tesla", "Ampere"], answer: "Henry" },
  { q: "Which factor does not affect flux linkage?", options: ["Area of coil", "Magnetic field strength", "Current resistance", "Number of turns"], answer: "Current resistance" },
  { q: "The emf induced in a circuit depends on:", options: ["Rate of change of flux", "Flux squared", "Field direction only", "None"], answer: "Rate of change of flux" },
  { q: "If B = 0.4 T, l = 0.2 m, v = 10 m/s, emf = ?", options: ["0.8 V", "0.04 V", "0.2 V", "4 V"], answer: "0.8 V" },
  { q: "The opposition to change of current in a coil is due to:", options: ["Capacitance", "Resistance", "Inductance", "Conductance"], answer: "Inductance" },
  { q: "Which type of emf is produced in a generator?", options: ["Motional emf", "Transformer emf", "Static emf", "Chemical emf"], answer: "Motional emf" },
  { q: "Magnetic flux density unit is:", options: ["Weber", "Tesla", "Henry", "Volt"], answer: "Tesla" },
  { q: "If flux changes by 1 Wb in 1 s in 100 turns, induced emf is:", options: ["1 V", "10 V", "100 V", "1000 V"], answer: "100 V" },
  { q: "Which law forms the basis of an electric generator?", options: ["Lenz‚Äôs law", "Faraday‚Äôs law", "Ohm‚Äôs law", "Coulomb‚Äôs law"], answer: "Faraday‚Äôs law" },

  // ---- 40 from new topics ----
  { q: "The force between two charges is inversely proportional to:", options: ["q1q2", "Distance", "Square of distance", "Permittivity"], answer: "Square of distance" },
  { q: "Unit of electric field is:", options: ["N/C", "J/C", "C/m¬≤", "Nm¬≤/C¬≤"], answer: "N/C" },
  { q: "An electron in a field of 500 N/C experiences a force of:", options: ["8√ó10‚Åª¬π‚Å∑ N", "5√ó10‚Åª¬π‚Å∂ N", "1.6√ó10‚Åª¬π‚Å∂ N", "None"], answer: "8√ó10‚Åª¬π‚Å∑ N" },
  { q: "Work done in moving a 2 C charge through 5 V is:", options: ["2 J", "5 J", "10 J", "0.4 J"], answer: "10 J" },
  { q: "Power dissipated in a 10 Œ© resistor with 2 A current is:", options: ["20 W", "10 W", "40 W", "5 W"], answer: "40 W" },
  { q: "Magnetic field at distance r from a long straight wire carrying current I is:", options: ["Œº‚ÇÄI/2œÄr", "Œº‚ÇÄI/4œÄr¬≤", "Œº‚ÇÄI¬≤/2œÄr", "Œº‚ÇÄ/r"], answer: "Œº‚ÇÄI/2œÄr" },
  { q: "Magnetic field inside a solenoid depends on:", options: ["Number of turns per unit length √ó current", "Only length", "Only radius", "None"], answer: "Number of turns per unit length √ó current" },
  { q: "Magnetic flux linkage is:", options: ["NŒ¶", "NŒ¶/t", "Œ¶/N", "None"], answer: "NŒ¶" },
  { q: "The force on a charge q moving with velocity v in a field B is:", options: ["qvB", "qvB cosŒ∏", "qvB sinŒ∏", "None"], answer: "qvB sinŒ∏" },
  { q: "If q=2 C, v=3 m/s, B=0.4 T, Œ∏=90¬∞, force is:", options: ["1.2 N", "2.4 N", "0.6 N", "0"], answer: "2.4 N" },
  { q: "A wire of length 0.2 m carrying current 5 A in a 0.3 T field at 90¬∞ experiences force:", options: ["0.15 N", "0.3 N", "0.6 N", "1.0 N"], answer: "0.3 N" },
  { q: "Power dissipated in terms of V and R is:", options: ["V¬≤/R", "IR", "VI", "I¬≤R"], answer: "V¬≤/R" },
  { q: "Which of these is dimensionless?", options: ["Relative permittivity", "Electric field", "Current", "Charge"], answer: "Relative permittivity" },
  { q: "Phase angle of RLC circuit œÜ is:", options: ["tan‚Åª¬π((Xl-Xc)/R)", "tan‚Åª¬π(R/(Xl-Xc))", "tan‚Åª¬π(Xc/R)", "tan‚Åª¬π(Xl/R)"], answer: "tan‚Åª¬π((Xl-Xc)/R)" },
  { q: "At resonance, impedance of RLC is:", options: ["R", "0", "‚àû", "Xl-Xc"], answer: "R" },
  { q: "In RLC resonance, current is:", options: ["Maximum", "Minimum", "Zero", "Infinite"], answer: "Maximum" },
  { q: "The reactance of a capacitor is:", options: ["1/œâC", "œâC", "1/C", "œâL"], answer: "1/œâC" },
  { q: "The reactance of an inductor is:", options: ["œâL", "1/œâL", "L/œâ", "None"], answer: "œâL" },
  { q: "In AC circuits, average power is:", options: ["VI cosœÜ", "VI sinœÜ", "VI", "I¬≤R only"], answer: "VI cosœÜ" },
  { q: "The power factor is:", options: ["cosœÜ", "tanœÜ", "sinœÜ", "None"], answer: "cosœÜ" },
  { q: "Current density J is:", options: ["œÉE", "œÅE", "V/I", "Q/t"], answer: "œÉE" },
  { q: "Ohm‚Äôs law states that:", options: ["V‚àùI", "V=IR", "Both", "None"], answer: "Both" },
  { q: "A 60 W bulb rated at 120 V has resistance:", options: ["240 Œ©", "60 Œ©", "120 Œ©", "20 Œ©"], answer: "240 Œ©" },
  { q: "The energy stored in an inductor is:", options: ["¬ΩLI¬≤", "¬ΩCV¬≤", "¬Ωmv¬≤", "None"], answer: "¬ΩLI¬≤" },
  { q: "Permittivity of free space Œµ‚ÇÄ is:", options: ["8.85√ó10‚Åª¬π¬≤ C¬≤/Nm¬≤", "9√ó10‚Åπ Nm¬≤/C¬≤", "4œÄ√ó10‚Åª‚Å∑ Tm/A", "None"], answer: "8.85√ó10‚Åª¬π¬≤ C¬≤/Nm¬≤" },
  { q: "Magnetic force on a straight conductor length l in B is:", options: ["BIl sinŒ∏", "BIl cosŒ∏", "qvB", "None"], answer: "BIl sinŒ∏" },
  { q: "If current is 2 A, length 0.5 m, B=0.2 T, Œ∏=90¬∞, force is:", options: ["0.1 N", "0.2 N", "0.3 N", "0.4 N"], answer: "0.2 N" },
  { q: "The resistance of a conductor depends on:", options: ["Length, area, resistivity", "Current", "Voltage", "Power"], answer: "Length, area, resistivity" },
  { q: "If resistance doubles, power at constant V:", options: ["Halves", "Doubles", "Quarter", "None"], answer: "Halves" },
  { q: "Coulomb‚Äôs constant k value is:", options: ["9√ó10‚Åπ Nm¬≤/C¬≤", "8.85√ó10‚Åª¬π¬≤", "1.6√ó10‚Åª¬π‚Åπ", "None"], answer: "9√ó10‚Åπ Nm¬≤/C¬≤" },
  { q: "Drift velocity is proportional to:", options: ["Current density", "Charge density", "Voltage squared", "Resistance"], answer: "Current density" },
  { q: "Electric power in terms of I and R is:", options: ["I¬≤R", "V¬≤R", "IR¬≤", "None"], answer: "I¬≤R" },
  { q: "A capacitor stores energy:", options: ["¬ΩCV¬≤", "¬ΩLI¬≤", "¬Ωmv¬≤", "QV"], answer: "¬ΩCV¬≤" },
  { q: "At resonance, Xl =", options: ["Xc", "0", "‚àû", "R"], answer: "Xc" },
  { q: "Magnetic field lines are:", options: ["Closed loops", "Straight", "Radial only", "None"], answer: "Closed loops" },
  { q: "A charged body attracts a neutral body due to:", options: ["Induction", "Conduction", "Polarization", "Both induction and polarization"], answer: "Both induction and polarization" },
  { q: "Resistance of a wire is doubled if:", options: ["Length doubled", "Area doubled", "Voltage doubled", "Both length and area doubled"], answer: "Length doubled" },
  { q: "Unit of capacitance is:", options: ["Farad", "Henry", "Weber", "Coulomb"], answer: "Farad" },
  { q: "In an AC circuit, current leads voltage by 90¬∞ in:", options: ["Pure capacitor", "Pure inductor", "Pure resistor", "None"], answer: "Pure capacitor" },
];

    // Build UI
  const container = document.getElementById('quizContainer');
  document.getElementById('totalQs').textContent = questions.length;

  // render questions
  questions.forEach((item, idx) => {
    const card = document.createElement('article');
    card.className = 'quiz-card';

    const qrow = document.createElement('div');
    qrow.className = 'qrow';

    const qnum = document.createElement('div');
    qnum.className = 'qnum';
    qnum.textContent = idx + 1;

    const qtext = document.createElement('div');
    qtext.className = 'qtext';
    qtext.innerHTML = `<strong>Q${idx + 1}:</strong> ${item.q}`;

    qrow.appendChild(qnum);
    qrow.appendChild(qtext);
    card.appendChild(qrow);

    const opts = document.createElement('div');
    opts.className = 'options';
    item.options.forEach((opt, optIdx) => {
      const id = `q${idx}_opt${optIdx}`;
      const label = document.createElement('label');
      label.className = 'opt';
      label.innerHTML = `<input type="radio" name="q${idx}" id="${id}" value="${escapeHtml(opt)}"> ${escapeHtml(opt)}`;
      opts.appendChild(label);
    });

    card.appendChild(opts);
    container.appendChild(card);
  });

  // scoring and result rendering
  function submitQuiz() {
    const total = questions.length;
    let score = 0;
    let answered = 0;
    let incorrectList = [];

    questions.forEach((q, i) => {
      const sel = document.querySelector(`input[name="q${i}"]:checked`);
      if (sel) answered++;
      if (sel && sel.value === q.answer) {
        score++;
      } else {
        const given = sel ? sel.value : null;
        incorrectList.push({
          qn: i + 1,
          given: given,
          correct: q.answer
        });
      }
    });

    const percent = Number(((score / total) * 100).toFixed(2));
    const box = document.getElementById('result');

    // reset classes
    box.className = '';

    if (percent >= 80) box.classList.add('good');
    else if (percent >= 50) box.classList.add('ok');
    else box.classList.add('try');

    const performanceText =
      percent >= 80 ? 'Excellent work! You have a strong understanding.' :
      percent >= 50 ? 'Good effort! Review the topics you missed.' :
      'Keep studying! Use this as a learning opportunity.';

    const percentLabel = `${percent}%`;
    const scoreLabel = `${score} / ${total}`;

    let html = `
      <div class="result-top">
        <div class="score-badge">
          <div>
            <div class="score">${scoreLabel}</div>
            <div style="font-size:13px; color:var(--muted);">Answered: ${answered} of ${total}</div>
          </div>
        </div>
        <div style="text-align:right;">
          <div style="font-size:13px; color:var(--muted);">Performance</div>
          <div class="percent">${percentLabel}</div>
        </div>
      </div>

      <div class="result-progress" aria-hidden="true">
        <div class="bar" id="resultBar" style="width:0%"></div>
      </div>

      <div class="result-msg">${escapeHtml(performanceText)}</div>

      <div class="result-actions">
        <button class="primary" onclick="retakeQuiz()">Retake Quiz</button>
        <button class="secondary" onclick="scrollToTop()">Review Answers</button>
      </div>
    `;

    if (incorrectList.length > 0) {
      html += `<div class="wrong-list">
                <div style="font-weight:700; margin-bottom:8px; color:var(--muted);">
                  Incorrect/Unanswered Questions (${incorrectList.length}):
                </div>
                ${incorrectList.map(it => {
                  const givenText = it.given ? `Your answer: "${escapeHtml(it.given)}"` : 'Not answered';
                  return `<div class="wrong-item"><strong>Q${it.qn}</strong> ‚Äî ${givenText} ‚Ä¢ Correct: "${escapeHtml(it.correct)}"</div>`;
                }).join('')}
              </div>`;
    }

    box.innerHTML = html;
    box.style.display = 'block';

    requestAnimationFrame(() => {
      const bar = document.getElementById('resultBar');
      if (bar) bar.style.width = percent + '%';
    });

    box.scrollIntoView({ behavior: 'smooth', block: 'start' });

    // disable submit until retake
    const submitBtn = document.getElementById('submit');
    if (submitBtn) submitBtn.disabled = true;
  }

  function resetQuiz() {
    if (!confirm('Reset all selected answers?')) return;
    document.querySelectorAll('input[type="radio"]').forEach(i => i.checked = false);
    const r = document.getElementById('result');
    r.style.display = 'none';
    r.className = '';
    r.innerHTML = '';
  }

  function retakeQuiz() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
    document.querySelectorAll('input[type="radio"]').forEach(i => i.checked = false);

    const r = document.getElementById('result');
    r.className = '';
    r.innerHTML = '';
    r.style.display = 'none';

    // re-enable submit
    const submitBtn = document.getElementById('submit');
    if (submitBtn) submitBtn.disabled = false;
  }

  function scrollToTop() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  // utility to escape HTML
  function escapeHtml(s) {
    if (s === null || s === undefined) return '';
    return String(s)
      .replaceAll('&', '&amp;')
      .replaceAll('<', '&lt;')
      .replaceAll('>', '&gt;')
      .replaceAll('"', '&quot;');
  }
</script>
</body>

</html>
